var T=Object.defineProperty;var L=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>L(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();class i{constructor(e){a(this,"tasks");this.tasks=[...e]}getTasks(){return this.tasks}static getIds(e){return e=i.normalizeArray(e),e.map(s=>s.getID())}static normalizeArray(e){return Array.isArray(e)?e:[e]}push(e){this.tasks.push(...i.normalizeArray(e))}removeAt(e){const s=e>=0&&e<this.tasks.length;return s&&this.tasks.splice(e,1),s}removeById(e){const s=new Set(i.normalizeArray(e));this.tasks=this.tasks.filter(o=>!s.has(o.getID()))}remove(e){this.removeById(i.getIds(e))}toggleComplete(e,s){this.toggleCompleteById(i.getIds(e),s)}toggleCompleteById(e,s){const o=new Set(i.normalizeArray(e));this.tasks.filter(r=>o.has(r.getID())).forEach(r=>s!==void 0?r.setIsComplete(s):r.toggleIsComplete())}getTaskById(e){return this.tasks.filter(s=>s.getID()==e)[0]}orderTasksByCompletedLast(){let e=new Set(this.tasks.filter(o=>o.getIsComplete()&&!0));return[...this.tasks.filter(o=>!e.has(o)),...e]}}class E{static list(e){return new i(e)}static singleTask(e){return new i([e])}static empty(){return new i([])}static from(e){return e?Array.isArray(e)?this.list(e):this.singleTask(e):this.empty()}}const m=class m{constructor(e,s){a(this,"id");a(this,"description");a(this,"isComplete");this.id=m.lastID++,this.description=e,this.isComplete=s}getID(){return this.id}getDescription(){return this.description}getIsComplete(){return this.isComplete}setIsComplete(e){this.isComplete=e}toggleIsComplete(){this.isComplete=!this.isComplete}};a(m,"lastID",0);let u=m;class v{static description(e){return new u(e,!1)}static all(e,s){return new u(e,s)}static from(e,s){return s!==void 0?this.all(e,s):this.description(e)}}const l=E.from();let d=null,f="",p="";function b(t){d=t}function B(t){f=t}function S(t){p=t}function A(t){const e=document.createElement("li");e.className="task",e.id=String(t.getID());const s=document.createElement("div");s.className=`task-core ${t.getIsComplete()?"complete":""}`;const o=document.createElement("button");o.className=f,o.role="checkbox",o.ariaChecked=`${t.getIsComplete()}`;const r=document.createElement("p");r.textContent=t.getDescription(),s.appendChild(o),s.appendChild(r);const n=document.createElement("button");n.className=p,e.appendChild(s),e.appendChild(n),d.appendChild(e),C([o,n]),h(n),g(s)}function k(){d&&(d.innerHTML="",l.orderTasksByCompletedLast().forEach(t=>{A(t)}))}function D(t){C([t]);const e=s=>{s.preventDefault();const r=new FormData(t).get("description"),n=t.querySelector('input[id="description"]');n&&(n.value="");const c=v.from(r);l.push(c),k()};t.addEventListener("submit",e)}function h(t){const e=()=>{const s=t.parentElement,o=parseInt(s.id);l.removeById(o),k()};t.addEventListener("click",()=>e())}function g(t){const e=()=>{const s=t.parentElement,o=parseInt(s.id),r=l.getTaskById(o);l.toggleCompleteById(o),t.querySelector(".checkbox-task").ariaChecked=`${r.getIsComplete()}`,k()};t.addEventListener("click",()=>e())}function q(t){const e=t.querySelector("#input-enter"),s=o=>{const r=t.querySelector("#description");(o.key==="ArrowLeft"||o.key==="ArrowDown"||o.key.toLowerCase()==="q"||o.key.toLowerCase()==="s"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key.toLowerCase()==="d"||o.key.toLowerCase()==="z")&&r.focus()};e.addEventListener("keydown",s)}function x(t){let e=t.previousElementSibling;e===null&&(e=t.parentElement.lastElementChild);let s=t.nextElementSibling;return s===null&&(s=t.parentElement.firstElementChild),{previousTaskID:e.id,nextTaskID:s.id}}function $(t,e){const s=o=>{const r=e===p?f:p;let n=t.parentElement;for(;!(n instanceof HTMLLIElement);)n=n.parentElement;const{previousTaskID:c,nextTaskID:I}=x(n);(o.key==="Enter"||o.key==="ArrowUp"||o.key.toLowerCase()==="z")&&(o.key==="Enter"&&(o.preventDefault(),t.click()),document.querySelector(`[id="${c}"]`).querySelector(`.${e}`).focus()),(o.key==="ArrowDown"||o.key.toLowerCase()==="s")&&document.querySelector(`[id="${I}"]`).querySelector(`.${e}`).focus(),(o.key==="ArrowLeft"||o.key.toLowerCase()==="q"||o.key==="ArrowRight"||o.key.toLowerCase()==="d")&&n.querySelector(`.${r}`).focus()};t.addEventListener("keydown",s)}function C(t){t.forEach(e=>{e instanceof HTMLFormElement&&q(e),e instanceof HTMLButtonElement&&$(e,e.classList[0])})}const M="checkbox-task",z="remove-task";document.querySelector("#app").innerHTML=`
  <h2>Task Tracker</h2>
  <label for="create-task"></label>
  <form id="create-task" action="">
    <label for="description">Description:</label>
    <input id="description" name="description" type="text" placeholder="Start writing and press enter to create task" >
    <input type="submit" id="input-enter" value="â® "/>
  </form>
  <ul id="task-list"></ul>
`;const H=document.querySelector("#task-list"),F=document.querySelector("#create-task"),K=document.querySelectorAll(".task-core"),N=document.querySelectorAll(".remove-task");b(H);B(M);S(z);D(F);N.forEach(t=>{h(t)});K.forEach(t=>{g(t)});
